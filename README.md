![–∏–∫–æ–Ω–∫–∞_–±–∞–Ω–∫–∞](https://img.icons8.com/nolan/96/bank-building.png)
[![Typing SVG](https://readme-typing-svg.herokuapp.com?color=%2336BCF7&lines=BANK+WIDGET)](https://git.io/typing-svg)

---
### üìå –û–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞. –†–µ–∞–ª–∏–∑—É–µ—Ç –º–∞—Å–∫–∏—Ä–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç.

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
bank_widget/
‚îú‚îÄ‚îÄ data/
‚îÇ ‚îî‚îÄ‚îÄ operations.json
‚îú‚îÄ‚îÄ src/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îú‚îÄ‚îÄ decorators.py
‚îÇ ‚îú‚îÄ‚îÄ external_api.py
‚îÇ ‚îú‚îÄ‚îÄ generators.py
‚îÇ ‚îú‚îÄ‚îÄ masks.py
‚îÇ ‚îú‚îÄ‚îÄ processint.py
‚îÇ ‚îú‚îÄ‚îÄ utils.py
‚îÇ ‚îî‚îÄ‚îÄ widget.py
‚îú‚îÄ‚îÄ tests/
‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îú‚îÄ‚îÄ conftest.py
‚îÇ ‚îú‚îÄ‚îÄ test_decorators.py
‚îÇ ‚îú‚îÄ‚îÄ test_external_api.py
‚îÇ ‚îú‚îÄ‚îÄ test_generators.py
‚îÇ ‚îú‚îÄ‚îÄ test_masks.py
‚îÇ ‚îú‚îÄ‚îÄ test_processint.py
‚îÇ ‚îú‚îÄ‚îÄ test_utils.py
‚îÇ ‚îî‚îÄ‚îÄ test_widget.py
‚îú‚îÄ‚îÄ .coverage
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .flake8
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ mylog.txt
‚îú‚îÄ‚îÄ pyproject.toml
‚îî‚îÄ‚îÄ README.md
```
### ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
git clone git@github.com:Kurai1369/bank_widget.git
cd bank_widget
poetry install
```
### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
```bash
python main.py
```
–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```bash
poetry env activate | Invoke-Expression
```

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Å—ã–ª–∫–∏.
- [isort](https://pycqa.github.io/isort/) ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
- [Poetry](https://python-poetry.org/docs/) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
### ‚úÖ –õ–∏—Ü–µ–Ω–∑–∏—è.
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ [MIT ¬© Kurai](https://github.com/ryo-ma/github-profile-trophy/blob/master/LICENSE).

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é `pytest`. –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ ‚Äî –±–æ–ª–µ–µ 80%.
```bash
poetry run pytest
poetry run pytest --cov=src --cov-report=html
start htmlcov/index.html
```
–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
```bash
poetry run pytest --cov=src --cov-report=html
start htmlcov/index.html  # Windows
```
```bash
poetry run pytest --cov=src --cov-report=html
open htmlcov/index.html   # macOS/Linux
```

### üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
#### –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã –∏ —Å—á—ë—Ç–∞
```python
from src.widget import mask_account_card

print(mask_account_card("Visa Platinum 7000792289606361"))
# ‚Üí Visa Platinum 7000 79** **** 6361

print(mask_account_card("–°—á–µ—Ç 73654108430135874305"))
# ‚Üí –°—á–µ—Ç **4305
```
#### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
```python
from src.widget import get_date

print(get_date("2024-03-11T02:26:18.671407"))
# ‚Üí 11.03.2024
```
#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –≤–∞–ª—é—Ç–µ
```python
from src.generators import filter_by_currency

usd_transactions = list(filter_by_currency(transactions, "USD"))
# –í–µ—Ä–Ω—ë—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö
```
#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç
```python
from src.generators import card_number_generator

for number in card_number_generator(1, 4):
    print(number)
# ‚Üí 0000 0000 0000 0001
# ‚Üí 0000 0000 0000 0002
# ‚Üí 0000 0000 0000 0003
```
#### –ó–∞–ø–∏—Å—å –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å
```python
@log()
def divide(a, b):
    return a / b

divide(1, 0)
# ‚Üí –í –∫–æ–Ω—Å–æ–ª—å: divide error: ZeroDivisionError. Inputs: (1, 0), {}
```

#### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [Exchange Rates Data API](https://apilayer.com/exchangerates_data-api).

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [apilayer.com](https://apilayer.com)
2. –ü–æ–ª—É—á–∏—Ç–µ API-–∫–ª—é—á
3. –°–æ–∑–¥–∞–π—Ç–µ `.env`:
   ```env
   EXCHANGE_RATES_API_KEY=–≤–∞—à_–∫–ª—é—á
```python
from src.external_api import convert_currency

transaction = {
    "operationAmount": {
        "amount": "100.0",
        "currency": {"code": "USD"}
    }
}

rub_amount = convert_currency(transaction)
print(rub_amount)  # ‚Üí ~9000.0 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—É—Ä—Å–∞)
```


#### –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ JSON

–§—É–Ω–∫—Ü–∏—è `load_transactions_from_json` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ JSON-—Ñ–∞–π–ª–∞.

```python
from src.utils import load_transactions_from_json

transactions = load_transactions_from_json("data/operations.json")
print(len(transactions))  # ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```

### üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [isort](https://pycqa.github.io/isort/) ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
- [Black](https://black.readthedocs.io/en/stable/) ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- [Pytest](https://docs.pytest.org/en/latest/) ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [Poetry](https://python-poetry.org/docs/) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- [mypy](https://mypy.readthedocs.io/en/stable/) ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- [PEP 8](https://pep8.org/) ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å—Ç–∏–ª—é –∫–æ–¥–∞